"use strict";(self.webpackChunkthreejs_learning=self.webpackChunkthreejs_learning||[]).push([[608],{7608:(R,G,p)=>{p.r(G),p.d(G,{CustomGeometryModule:()=>F});var S=p(6895),l=p(1571),n=p(6682),x=p(7152);const A=["canvas"];let z=(()=>{class r{ngAfterViewInit(){this.createRenderer(),this.createScene(),this.createLight(-1,2,4),this.createLight(2,-2,3),this.createCamera();const t=new x.z(this.camera,this.renderer.domElement);t.target.set(0,0,0),t.update();const{positions:s,indices:i}=this.makeSpherePositions(24,16),h=s.slice(),c=new n.u9r,d=new n.TlE(s,3);d.setUsage(n.dj0),c.setAttribute("position",d),c.setAttribute("normal",new n.TlE(h,3)),c.setIndex(i);const M=new n.xoR({color:"#dd0000",side:n.ehD,shininess:100}),f=new n.Kj0(c,M);f.position.x=0,this.scene.add(f),this.renderer.render(this.scene,this.camera);const y=new n.Pa4,v=u=>{this.resize(this.renderer,this.camera),u*=.001;for(let g=0;g<s.length;g+=3){const w=g/12|0,P=w/24|0,H=w%24/24*Math.PI*2;y.fromArray(h,g),y.multiplyScalar(n.M8C.lerp(1,1.4,.2*Math.sin(u+P+H)+.5)),y.toArray(s,g)}d.needsUpdate=!0,f.rotation.y=.2*u,this.renderer.render(this.scene,this.camera),this.animationId=window.requestAnimationFrame(v)};this.animationId=window.requestAnimationFrame(v)}ngOnDestroy(){cancelAnimationFrame(this.animationId)}createRenderer(){this.renderer=new n.CP7({canvas:this.canvasElement.nativeElement})}createCamera(){this.camera=new n.cPb(75,2,.1,100),this.camera.position.set(0,0,3)}createLight(...t){const e=new n.Ox3("#fff",1);e.position.set(...t),this.scene.add(e)}createScene(){this.scene=new n.xsS,this.scene.background=new n.Ilk("#111")}resize(t,e){const o=t.domElement,s=o.clientWidth,i=o.clientHeight;(o.width!==s||o.height!==i)&&(t.setSize(s,i,!1),e.aspect=o.clientWidth/o.clientHeight,e.updateProjectionMatrix())}makeSpherePositions(t,e){const i=new Float32Array(t*e*6*3),h=[],c=this.createSpherePointGetter();let a=0,m=0;for(let d=0;d<e;++d){const y=(d/e-.5)*Math.PI,v=((d+1)/e-.5)*Math.PI;for(let u=0;u<t;++u){const P=u/t*Math.PI*2,I=(u+1)/t*Math.PI*2;i.set(c(y,P),a),a+=3,i.set(c(v,P),a),a+=3,i.set(c(y,I),a),a+=3,i.set(c(v,I),a),a+=3,h.push(m,m+1,m+2,m+2,m+1,m+3),m+=4}}return{positions:i,indices:h}}createSpherePointGetter(){const t=new n.Tme,e=new n.Tme,o=new n.Tme;t.add(e),e.add(o),o.position.z=1;const s=new n.Pa4;return(i,h)=>(e.rotation.x=i,t.rotation.y=h,t.updateMatrixWorld(!0),o.getWorldPosition(s).toArray())}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=l.Xpm({type:r,selectors:[["app-custom-geometry"]],viewQuery:function(t,e){if(1&t&&l.Gf(A,5,l.SBq),2&t){let o;l.iGM(o=l.CRH())&&(e.canvasElement=o.first)}},decls:2,vars:0,consts:[[1,"canvas"],["canvas",""]],template:function(t,e){1&t&&l._UZ(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{position:relative;height:100%;display:grid;place-items:center;background-color:#181818}.canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"]}),r})();var E=p(4462);const j=[{path:"",component:z}];let F=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=l.oAB({type:r}),r.\u0275inj=l.cJS({imports:[S.ez,E.Bz.forChild(j)]}),r})()}}]);